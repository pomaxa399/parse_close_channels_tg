# Установка парсера закрытых ТГ каналов:
1. Клонировать Git репозиторий себе на компьютер
2. Создать виртуальное оркужения для проекта
3. Выполнить команду pip install -r requirements, чтобы установить необходимые зависимости
4. Теперь необходимо получить api_id и api_hash для работы с api telegram. Нужно зайти по https://my.telegram.org/apps и зарегистрировать новое приложение.
5. После получения api_id и api_hash внести их в соответствующие переменные в файле step_1.py

На этом установка закончена.

## Работа парсера:
Парсер собирает данные из каналов, на которые аккаунт подписан.
На данный момент парсер имеет файлы step_1,2,3. Соответственно запускать их и нужно по очереди.
При первом запуске step_1.py нужно будет ввести номер телефона в формате +79991234567 в консоли и подтвердить правильность номера.
### step_1.py:
Собирает все закрытые каналы с аккаунта, парсит с них данные, сохраняет с каналов картинки, превью видео на компьютер. Настраиваемые данные:
- ***api_id*** = 2424242 - API ID, полученное на сайте Telegram.
- ***api_hash*** = 'sdas14dsar3qa' - API Hash, полученный на сайте Telegram.
- ***limit*** = 100 - количество постов для парсинга, начиная с последнего.
### На выходе будут:
- my_account.session - файл сессии, появится после первого запуска, будет держать подключение по API к аккаунту.
 - Папки ***-100.../*** - папки с названием id чата, внутри папки с id поста, либо id медиагрупп (когда несколько фотографий в посте).
 - папка ***downloads/***, её можно будет удалить после того, как step_1.py отработает. Там будут дубликаты все скачанных картинок.
 - Файлы ***chat|chats.txt|json*** - технические файлы при сборе и обработке каналов.
### step_2.py:
Обходит каждую папку со скачанными фотографиями и превью видео и сопоставляет их с постами, делая ссылки для датасета.
#### На выходе будет файл ***output.json*** со всеми нужными ссылками на картинки и превью видео.
### step_3.py:
Очищает данные, записывает все данные в ***data1.csv***.
#### На выходе получаете data1.csv со столбцами:
- ***Title*** - название канала
- ***Chat_id_or_url*** - чат id для закрытых каналов, либо url адрес поста для открытых каналов. *Сделано так, чтобы можно было потом объеденить csv файлы для закрытых и открытых ТГ каналов в один датасет*.
- ***Post_id*** - столбец для закрытых ТГ каналов, т.к. работая по API нельзя получить ссылку на пост. В data.csv открытых каналов будет пустой столбец.
- ***Date*** - дата публикации поста.
- ***Content*** - текстовые данные постов.
- ***Image_url*** - ссылки на картинки с поста, превью сайта.
- ***Video_preview*** - ссылки на картинки превью видео в постах.
- ***Views*** - кол-во просмотров поста.